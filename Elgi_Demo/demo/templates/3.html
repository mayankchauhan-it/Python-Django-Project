<button id="start-camera">Start Camera</button>
<video id="video" width="500" height="500" autoplay></video>
<button id="click-photo" onClick="bg()">Click Photo</button>
<canvas id="myCanvasCircle" width="500" height="500" ></canvas>



<style>

myCanvasCircle{

background-image:url(image/jpeg);
background-repeat:no-repeat;
background-size:cover;

}

</style>

<script>

let camera_button = document.querySelector("#start-camera");
let video = document.querySelector("#video");
let click_button = document.querySelector("#click-photo");
let canvas_c = document.querySelector("#myCanvasCircle");

camera_button.addEventListener('click', async function() {
   	let stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
	video.srcObject = stream;
});


click_button.addEventListener('click', function() {
   	canvas_c.getContext('2d').drawImage(video, 0, 0, canvas_c.width, canvas_c.height);
   	let image_data_url = canvas_c.toDataURL('image/jpeg');
    
   	// data url of the image
   	console.log(image_data_url);
});
</script>


<script>
    console.log("abc");
    var canvas = document.getElementById('myCanvasCircle'),
        ctx = canvas.getContext('2d'),
        circle = {},
        drag = false,
        circleMade = false;

    function draw() {
        ctx.strokeStyle = 'rgb(255, 0, 0)';
        ctx.beginPath();
        ctx.arc(circle.X, circle.Y, circle.radius, 0, 2.0 * Math.PI);
        ctx.stroke();

    }

    function mouseDown(e) {

        circle.startX = e.pageX - this.offsetLeft;
        circle.startY = e.pageY - this.offsetTop;

        circle.X = circle.startX;
        circle.Y = circle.startY;

        if (!circleMade) {
            circle.radius = 0;
        }

        drag = true;
    }

    function mouseUp() {
        drag = false;
        circleMade = true;
    }

    function mouseMove(e) {
        if (drag) {
            circle.X = e.pageX - this.offsetLeft - 50;
            circle.Y = e.pageY - this.offsetTop ;
            if (!circleMade) {
                circle.radius = Math.sqrt(Math.pow((circle.X - circle.startX), 2) + Math.pow((circle.Y - circle.startY), 2));
            }
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            draw();
        }
    }

    function init() {
        canvas.addEventListener('mousedown', mouseDown, false);
        canvas.addEventListener('mouseup', mouseUp, false);
        canvas.addEventListener('mousemove', mouseMove, false);

    }

    init();
</script>