{% load static %}
{% include 'general/main.html' %}
    <head>
        {% include 'general/title_meta.html' %}
        <!-- plugin css -->
        <link href="{% static 'libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.css' %}" rel="stylesheet" type="text/css"/>

        <!-- DataTables -->
        <link href="{% static 'libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">

        {% comment %} <!-- MDB -->
        <link
        href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.1.0/mdb.min.css"
        rel="stylesheet"
        /> {% endcomment %}
        <!-- Responsive datatable examples -->
        <link href="{% static 'libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css' %}" rel="stylesheet" type="text/css" />
        {% include 'general/head_css.html' %}

        <style>
            .scrollme {
                overflow-x: auto;
            }
            hidden-panel {
                display: none;
            }
            .data_pointer
            {
                cursor:pointer;

            }
            td:hover
            {
                color:#ee3420;
            }
            .hidden {
                display: none;
            }


            .top-img {
                padding: 5px;
                height: 120px;
                width: 120xp;
            }

            /* MEDIA QUERIES */
            @media only screen and (max-width: 1138px) {
                /* For Tablets */
                .top-img {
                    width: 100%;
                }
            }

        </style>
    </head>

    {% include 'general/body.html' %}
        <!-- Begin page -->
        <div id="layout-wrapper">
            {% include 'general/top_bar_for_operator.html' %}
            <!-- ============================================================== -->
            <!-- Start Right Content here -->
            <!-- ============================================================== -->
            <div class="container-fluid" style="padding-top: 80px;">
                <div class="row"> <!-- Top Title -->
                    <div class="col-12">
                        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                            <h4 class="mb-sm-0 font-size-18">Alpha Line-Sub Station...</h4>
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Alpha Line-Sub Station 1</a></li>
                                    <li class="breadcrumb-item active">Alpha Line-Sub Station 1</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div> <!-- END OF Top Title-->

                <!-- START OF Top Section (Employee And FAB Details) -->
                <div class="row" style="padding: 10px; height:170px;">
                    <div class="col-md-9"> <!-- LEFT CARD -->
                        <div class="row justify-content-center" style="padding: 5px;"> <!-- INNER CONTENTS -->
                            <div class="col-md-12 align-self-center card bg-dark border-dark text-light" style="height: 140px; padding: 5px;"> <!-- CARD -->
                                <div class="row">
                                    <div class="col-md-2 align-self-center"> <!-- IMAGE COLUMN -->
                                        <img id="imgTop" alt="Top Image" class="img-fluid rounded top-img" src="{% static 'images/users/300-1.png' %}">
                                    </div> <!-- IMAGE COLUMN ENDS -->
                                    <div class="col-md-10"> <!-- CONTENT COLUMN -->
                                        <table style="width: 100%; font-size: 1.3em;">
                                            <tr>
                                                <td class="text-white-50">Emp. Name</td>
                                                <td id="lblEmpName">Abhay</td>
                                                <td>&nbsp;</td>
                                                <td class="text-white-50">FAB</td>
                                                <td id="lblFAB">AUES034896</td>
                                            </tr>
                                            <tr>
                                                <td class="text-white-50">Emp. ID</td>
                                                <td id="lblEmpId">3400</td>
                                                <td>&nbsp;</td>
                                                <td class="text-white-50">Station ID</td>
                                                <td id="lblStationId">SS1</td>
                                            </tr>
                                            <tr>
                                                <td class="text-white-50">Skill Level</td>
                                                <td id="lblSkillLevel">10</td>
                                                <td>&nbsp;</td>
                                                <td class="text-white-50">TPL</td>
                                                <td id="lblTPL">tpl11</td>
                                            </tr>
                                            <tr>
                                                <td class="text-white-50">Process</td>
                                                <td id="lblProcessDesc" colspan="4">undefined</td>
                                            </tr>
                                        </table>
                                    </div> <!-- CONTENT COLUMN ENDS -->
                                </div>
                            </div> <!-- CARD ENDS -->
                        </div> <!-- INNER CONTENT ENDS -->
                    </div> <!-- LEFT CARD ENDS -->
                    <div class="col-md-3"> <!-- RIGHT CARD -->
                        <div class="row" style="padding: 5px; height: 173px;">
                            <div class="col-md-12 card bg-dark border-dark text-light" style="font-size: 1.5em; text-align: center; padding: 5px;">
                                <div class="text-white-50">Cycle Time</div>
                                <div id="lblCycleTimeTmr">undefined</div>
                                <div class="text-white-50">Actual Time</div>
                                <div id="lblActTimeTmr">0:16</div>
                            </div>
                        </div>
                    </div> <!-- RIGHT CARD ENDS -->
                </div> <!-- END OF Top Section (Employee And FAB Details) -->

                <div class="row" hidden> <!--Hidden Common Screen Fields STARTS -->
                    <div class="col-md-12">
                        <div id="lblProcSeqNo"></div>
                        <div id="lblOperatorCode"></div>
                        <div id="lblTorque"></div>
                        <div id="lblToolId"></div>
                        <div id="lblBoltCnt"></div>
                        <div id="lblTalkTime"></div>
                    </div>
                </div><!--Hidden Common Screen Fields ENDS -->

                <!-- START OF Bottom Section -->
                <div class="row" style="padding-left: 15px;">
                    <!-- START OF LEFT BOTTOM Section -->
                    <div class="col-md-8" style="padding-top: 5px;">
                        <div class="row" style="padding: 5px;"> <!-- PROCESS TYPE TABLE STARTS -->
                            <div class="col-md-12 card" style="padding: 5px;">
                                <div class="row card-title bg-dark rounded text-center text-light">
                                    <div class="col-md-4">Process Type</div>
                                    <div class="col-md-4">Total Process</div>
                                    <div class="col-md-4">Completed Process</div>
                                </div>
                                <div class="row text-center">
                                    <div id="lblProcType" class="col-md-4">N/A</div>
                                    <div id="lblTotalProc" class="col-md-4">10</div>
                                    <div id="lblCompProc" class="col-md-4">0</div>
                                </div>
                            </div>
                        </div> <!-- PROCESS TYPE TABLE ENDS -->

                        <!-- =================================================
                            === ALL THE OTHER PROCESS ENTRY DIVS STARTS HERE
                        ================================================= -->
                        <div id="divCP_AIREND" class="row" style="padding: 5px;"> <!-- CP_AIREND SCREEN STARTS -->
                            <div class="col-md-12 card">
                                <div class="row" style="padding: 10px;">
                                    <div class="col-md-6">
                                        <table>
                                            <tbody>
                                                <tr>
                                                    <td style="width: 80px;">Part No</td>
                                                    <td><input type="text" id="txtCpAirend_PartNo"></td>
                                                </tr>
                                                <tr>
                                                    <td>REV No</td>
                                                    <td><input type="text" id="txtCpAirend_RevNo"></td>
                                                </tr>
                                                <tr>
                                                    <td>Serial No</td>
                                                    <td><input type="text" id="txtCpAirend_SrNo"></td>
                                                </tr>
                                                <tr>
                                                    <td>&nbsp;</td>
                                                    <td>&nbsp;</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-md-6">&nbsp;</div>
                                </div>
                                <div class="row" style="padding-bottom: 10px;">
                                    <div class="col-md-12"><button id="CP_AIREND_BTN" type="button" class="btn btn-primary btn-lg" style="width: 100%;" onclick="CP_AIREND_Submit()">SUBMIT</button></div>
                                </div>
                            </div>
                        </div> <!-- CP_AIREND SCREEN ENDS -->

                        <div id="divCP_BELT_DETAILS" class="row" style="padding: 5px;"> <!-- CP_BELT_DETAILS SCREEN STARTS -->
                            <div class="col-md-12 card">
                                <div class="row" style="padding: 10px;">
                                    <div class="col-md-6">
                                        <table>
                                            <tbody>
                                                <tr>
                                                    <td style="width: 80px;">Part No</td>
                                                    <td><input type="text" id="txtCpBeltDet_PartNo"></td>
                                                </tr>
                                                <tr>
                                                    <td>Rev No</td>
                                                    <td><input type="text" id="txtCpBeltDet_RevNo"></td>
                                                </tr>
                                                <tr>
                                                    <td>Batch No 1</td>
                                                    <td><input type="text" id="txtCpBeltDet_BatchNo1"></td>
                                                </tr>
                                                <tr>
                                                    <td>Batch No 2</td>
                                                    <td><input type="text" id="txtCpBeltDet_BatchNo2"></td>
                                                </tr>
                                                <tr>
                                                    <td>Batch No 3</td>
                                                    <td><input type="text" id="txtCpBeltDet_BatchNo3"></td>
                                                </tr>
                                                <tr>
                                                    <td>&nbsp;</td>
                                                    <td>&nbsp;</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-md-6">
                                        <table>
                                            <tbody>
                                                <tr>
                                                    <td style="width: 80px;">Belt Length</td>
                                                    <td id="tdCpBeltDet_BltLen"></td>
                                                </tr>
                                                <tr>
                                                    <td style="width: 80px;">Span Length</td>
                                                    <td id="tdCpBeltDet_SpnLen"></td>
                                                </tr>
                                                <tr>
                                                    <td style="width: 80px;">Belt Mass</td>
                                                    <td id="tdCpBeltDet_BltMass"></td>
                                                </tr>
                                                <tr>
                                                    <td style="width: 80px;">Belt Tension</td>
                                                    <td id="tdCpBeltDet_BltTnsn"></td>
                                                </tr>
                                                <tr>
                                                    <td>Belt Make</td>
                                                    <td>
                                                        <input list="browsers" id="ddCpBeltDet_BltMake">
                                                        <datalist id="browsers">
                                                            <option value="A">
                                                            <option value="B">
                                                            <option value="C">
                                                        </datalist>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>&nbsp;</td>
                                                    <td>&nbsp;</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="row" style="padding-bottom: 10px;">
                                    <div class="col-md-12"><button id="CP_BELT_DETAILS_BTN" type="button" class="btn btn-primary btn-lg" style="width: 100%;" onclick="CP_BELT_DETAILS_Submit()">SUBMIT</button></div>
                                </div>
                            </div>
                        </div> <!-- CP_BELT_DETAILS SCREEN ENDS -->

                        <div id="CP_CONTROL_PANEL" class="row" style="padding: 5px;"> <!-- CP_CONTROL_PANEL STARTS -->
                            <div class="col-md-12 card">
                                <div class="row" style="padding: 10px;">
                                    <div class="col-md-6">
                                        <table id="datatable1" class="table table-bordered dt-responsive nowrap w-100">
                                            <tbody>
                                                <tr>
                                                    <td>Part No.</td>
                                                    <td> <input type="text" id="txtCpControlPanel_PartNo"> </td>
                                                </tr>
                                                <tr>
                                                    <td>REV No</td>
                                                    <td> <input type="text" id="txtCpControlPanel_RevNo"> </td>
                                                </tr>
                                                <tr>
                                                    <td>Serial No</td>
                                                    <td> <input type="text" id="txtCpControlPanel_SerialNo"> </td>
                                                </tr>
                                                <tr>
                                                    <td>Model</td>
                                                    <td>
                                                        <input list="browsers" name="model" id="txtCpControlPanel_Model" class="">
                                                            <datalist id="browsers">
                                                                <option value="A">
                                                                <option value="B">
                                                                <option value="C">
                                                            </datalist>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>&nbsp;</td>
                                                    <td> &nbsp; </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-md-6">&nbsp;</div>
                                </div>
                                <div class="row" style="padding-bottom: 10px;">
                                    <div class="col-md-12"><button id="CP_BELT_DETAILS_BTN" type="button" class="btn btn-primary btn-lg" style="width: 100%;" onclick="CP_CONTROL_PANEL_Submit()">SUBMIT</button></div>
                                </div>
                            </div>
                        </div> <!-- CP_CONTROL_PANEL SCREEN ENDS -->

                        <div id="divSUBMIT" class="row" style="padding: 5px;"> <!-- SUBMIT SCREEN STARTS -->
                            <div class="col-md-12 card">
                                <div class="row" style="padding: 10px;">
                                    <div class="col-md-6">
                                    </div>
                                    <div class="col-md-6">
                                    </div>
                                </div>
                                <div class="row" style="padding-bottom: 10px;">
                                    <button id="SUBMIT_BTN" type="button" class="btn btn-primary btn-lg" style="width: 100%;" onclick="SUBMIT_Submit()">SUBMIT</button>
                                </div>
                            </div>
                        </div> <!-- SUBMIT SCREEN ENDS -->

                        <!-- =================================================
                            === ALL THE OTHER PROCESS ENTRY DIVS ENDS HERE
                        ================================================= -->
                    </div> <!-- END OF LEFT BOTTOM Section -->
                    <!-- START OF RIGHT BOTTOM Section -->
                    <div class="col-md-4">
                        <div class="row" style="padding: 5px; height: 180px;">
                            <div class="col-md-6"> <!-- P/Q BUTTONS START -->
                                <div class="row justify-content-center align-items-center" style="padding: 5px;">
                                    <div class="col-md-12 align-self-center card" style="height: 160px !important;">
                                        <div class="card-body" style="text-align: center">
                                            <h5 class="text-dark mb-3">Waste Capture</h5>
                                            <div class="d-flex flex-wrap gap-2 justify-content-evenly">
                                                <button style="width: 70px; height: 70px;" id="btnP" type="button" class="btn btn-primary font-size-24">P</button>
                                                <button style="width: 70px; height: 70px;" id="btnQ" type="button" class="btn btn-primary font-size-24">Q</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> <!-- P/Q BUTTONS START -->
                            <div class="col-md-6"> <!-- PROCESS BUTTONS START -->
                                <div class="row" style="padding: 5px;">
                                    <div class="col-md-12 card" style="height: 160px !important;">
                                        <div class="card-body text-center">
                                            <div class="d-flex flex-wrap gap-2 justify-content-center">
                                                <button style="width: 140px; height:50px; font-size: 0.9em;" class="my-1 btn btn-primary btn-lg"
                                                    type="button" data-bs-toggle="offcanvas"
                                                    data-bs-target="#offcanvasTop"
                                                    aria-controls="offcanvasTop">Process Skip</button>
                                            </div>
                                            <div class="d-flex flex-wrap gap-2 justify-content-center">
                                                <button style="width: 140px; height:50px; font-size: 0.9em;" class="my-1 btn btn-primary btn"
                                                    type="button" data-bs-toggle="offcanvas"
                                                    data-bs-target="#offcanvasTop" aria-controls="offcanvasTop">Unit Skip</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> <!-- PROCESS BUTTONS ENDS -->
                        </div>
                        <div class="row" style="padding: 5px;"> <!-- IMAGE SECTION SARTS -->
                            <div class="col-md-12 card" style="padding: 10px;">
                                <img id="imgBottom" class="img-fluid" src="{% static 'images/users/300-1.png' %}" alt="Card image cap" style="height: 200px; width: 200px;">
                            </div>
                        </div> <!-- IMAGE SECTION ENDS -->
                    </div> <!-- END OF RIGHT BOTTOM Section -->
                </div> <!-- END OF Bottom Section -->
            </div> <!-- END OF Right Contents -->
        </div>
        <!-- END layout-wrapper -->

        {% comment %}
        <div id="pbox" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="card mb-0">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12">

                                <!-- Header -->

                                <div class="card bg-dark text-light">
                                    <div class="card-body ">
                                    <div class="row">
                                            <div class="col-md-5">
                                                <div class="row">
                                                    <div class="col-xl-6">
                                                        <div class="row">
                                                            <div class="col-xl-12 font-size-18 text-white-50 mb-1">
                                                                Emp. Name
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xl-12 font-size-18 text-white-50 mb-1">
                                                                Emp. ID
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="col-xl-6">
                                                        <div class="row">
                                                            <div class="col-xl-12 font-size-18 mb-1 text-white">
                                                                Dinesh S
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xl-12 font-size-18 mb-1 text-white">3400
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <br>
                                            </div>
                                            <div class="col-md-5">
                                                <div class="row">
                                                    <div class="col-xl-6">
                                                        <div class="row">
                                                            <div class="col-xl-12 font-size-18 text-white-50 mb-1">
                                                                FAB</div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xl-12 font-size-18 text-white-50 mb-1">
                                                                TPL</div>
                                                        </div>

                                                    </div>
                                                    <div class="col-xl-6">
                                                        <div class="row">
                                                            <div class="col-xl-12 font-size-18 mb-1 text-white">
                                                                BSISO38928
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xl-12 font-size-18 mb-1 text-white">
                                                                S123456
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                    </div>
                                </div>

                                <!-- Timer -->

                                <div class="card bg-dark">
                                    <div class="card-body">
                                        <div class="row justify-content-between ">
                                            <div style="margin-top: 10px;" class="col-md-4 ">
                                                <h4 class="text-white-50 mb-0 bg-dark px-2">
                                                    Cycle Time : <span id="cycle-time"
                                                        class="text-light mb-0 mt-2">00:05</span>
                                                </h4>
                                            </div>

                                            <div class="col-md-4 ">
                                                <h4 class="text-white-50 mb-0 mt-2 ">
                                                    Actual Time : <span id="actualtime"
                                                        class="text-light mb-0 mt-2">00:00</span></h4>
                                            </div>

                                            <div class="col-md-4 ">
                                                <h4 class="text-white-50 mb-0 mt-2 ">
                                                    Difference : <span id="time-diff"
                                                        class="text-light mb-0 mt-2">00:00</span>
                                                </h4>
                                            </div>
                                        </div><!-- end card -->
                                    </div>
                                </div>

                                <!-- Dropdowns -->

                                <div class="card bg-dark">
                                    <div class="card-body">
                                        <div class="row justify-content-between ">
                                            <div class="col-md-6 ">
                                                <div class="row align-items-center">
                                                    <label style="font-size: 18px; " for="bypass"
                                                        class="col-sm-3 col-form-label text-light">Level 1</label>
                                                    <div class="col-sm-8">
                                                        <select style="height: 50%;" class="form-select" id="bypass"
                                                            name="bypass">
                                                            <option></option>
                                                            <option>Option 1</option>
                                                            <option>Option 2</option>
                                                        </select>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center">
                                                    <label style="font-size: 18px;" for="bypass"
                                                        class="col-md-3 col-form-label text-light">Level 2</label>
                                                    <div class="col-sm-8">
                                                        <select style="height: 50%;" class="form-select" id="bypass"
                                                            name="bypass">
                                                            <option></option>
                                                            <option>Option 1</option>
                                                            <option>Option 2</option>
                                                        </select>
                                                    </div>
                                                </div>

                                            </div>
                                        </div><!-- end card -->
                                    </div>
                                </div>

                                <!-- Submit button -->
                                <div class="card">
                                    <div class="card-body">
                                        <div class="row justify-content-between ">
                                            <div class="col-md-12 text-center">
                                                <button style="width: 200px;" type="button" class="btn btn-primary close"
                                                    id="ploss_submit_btn">Submit</button>
                                            </div>
                                        </div><!-- end card -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>

        <div id="qbox" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div  class="modal-dialog modal-lg">
            <div class="modal-content">
                <div  class="card mb-0">
                    <div  class="card-body">
                        <div class="row">
                            <div  class="col-md-12">
                                <!-- Header Part -->
                                <div class="card bg-dark">
                                    <div class="card-body">
                                        <h5 class="text-light">Please Select the Level 1 and Level 2 dropdowns and wait until the issue is resolved.</h5> 
                                    </div>
                                </div>

                                <!-- Main Part -->
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <!-- Timer & Dropdowns -->
                                        <div class="row">
                                            <div class="col-md-8">
                                                <div class="card bg-dark">
                                                    <div class="card-body ">
                                                        <div class="row">
                                                            <!-- Dropdown One -->
                                                            <div class="col-md-12"> 
                                                                <div class="row align-content-center">
                                                                    <label style="font-size: 18px; " for="bypass"
                                                                        class="col-sm-3 col-form-label text-light">Level 1</label>
                                                                    <div class="col-sm-8 d-flex align-items-center">
                                                                        <select style="height: 60%;" class="form-select" id="bypass"
                                                                            name="bypass">
                                                                            <option></option>
                                                                            <option>Option 1</option>
                                                                            <option>Option 2</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- Dropdown Two -->
                                                            <div class="col-md-12">
                                                                <div class="row align-content-center">
                                                                    <label style="font-size: 18px; " for="bypass"
                                                                        class="col-sm-3 col-form-label text-light">Level 2</label>
                                                                    <div class="col-sm-8 d-flex align-items-center">
                                                                        <select style="height: 60%;" class="form-select" id="bypass2"
                                                                            name="bypass">
                                                                            <option></option>
                                                                            <option>Option 1</option>
                                                                            <option>Option 2</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="card bg-dark">
                                                    <div class="card-body">
                                                        <div class="row ">
                                                            <!-- Label Name -->
                                                            <div class="col-md-12 text-center "> 
                                                                <h3 class="text-light">DMS Timer</h3>
                                                            </div>
                                                            <div class="col-md-12"> 
                                                                &nbsp;
                                                            </div>
                                                            <div class="col-md-12 text-center "> 
                                                                <h3 id="dmstimer" class="text-light">00:05</h3>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Submit Butoon -->
                                        <div class="row">
                                            <div class="col-md-12 text-center ">
                                                <button style="width: 200px;" type="button" class="btn btn-primary"
                                                    id="qloss_submit_btn">Submit</button>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
        
        <div id="donemodal" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div  class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-content">
                    <div class="modal-header d-flex justify-content-between m-0">
                        <h4 class="modal-title">All process Done</h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
            
                    <div class="modal-footer">
                    <button type="button" id="popup_ok" class="btn btn-default" data-dismiss="modal">Okay</button>
                    <button  id="popup_close" type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
            </div>
        </div> -->

        <div id="vaildationbox" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div  class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-content">
                    <div class="modal-header d-flex justify-content-between m-0">
                        <h4 class="modal-title">Error</h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>

                    <div class="modal-body">
                        <p id="errormessage"></p>
                    </div>
                </div>
            </div>
            </div>
        </div>
        {% endcomment %}

        <div class="modal fade" id="donemodal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Complete</h4>
                    </div> 
                    <div class="modal-body">
                        All Processes Done
                    </div>   
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" onclick="closeModal('#donemodal')">OK</button> 
                    </div>
                </div>                                                                       
            </div>                                          
        </div>

        <div class="modal fade" id="commonmodal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 id="comModalTitle" class="modal-title">Complete</h4>
                    </div> 
                    <div id="comModalBody" class="modal-body">
                        All Processes Done
                    </div>   
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" onclick="closeModal('#commonmodal')">OK</button> 
                    </div>
                </div>                                                                       
            </div>                                          
        </div>

        {% include 'general/right_side_bar.html' %}
        {% include 'general/vendor_script.html' %}

        <!-- Required datatable js -->
        <script src="{%static 'libs/datatables.net/js/jquery.dataTables.min.js' %}"></script>
        <script src="{%static 'libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js' %}"></script>

        <!-- Buttons examples -->
        <script src="{%static 'libs/datatables.net-buttons/js/dataTables.buttons.min.js' %}"></script>
        <script src="{%static 'libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js' %}"></script>
        <script src="{%static 'libs/jszip/jszip.min.js' %}"></script>
        <script src="{%static 'libs/pdfmake/build/pdfmake.min.js' %}"></script>
        <script src="{%static 'libs/pdfmake/build/vfs_fonts.js' %}"></script>
        <script src="{%static 'libs/datatables.net-buttons/js/buttons.html5.min.js' %}"></script>
        <script src="{%static 'libs/datatables.net-buttons/js/buttons.print.min.js' %}"></script>
        <script src="{%static 'libs/datatables.net-buttons/js/buttons.colVis.min.js' %}"></script>

        <!-- Responsive examples -->
        <script src="{%static 'libs/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
        <script src="{%static 'libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js' %}"></script>

        <!-- Datatable init js -->
        <script src="{%static 'js/pages/datatables.init.js' %}"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <script src"{% static 'js/pages/modal.init.js' %}"></script>

        <script src="{% static 'js/app.js' %}"></script>

        <!-- Screen change API -->
        <script>
            var restAPI = {
                substationapi: "http://20.212.149.30:8000/substationapi",
            };

            var PROCESS_TYPE = "CP_AIREND"; //DEFAULT PROCESS TYPE. Coming from Django during Page Load.
            //var PROCESS_TYPE = "CP_BELT_DETAILS"; 
            var nextSeq = ""; //Next Sequence Screen to be displayed.

            var BarCode = "PRT001!REV001!SR123456"; // Barcode that gest scanned from the scanner. 
            const splitChar = "!"; //The Split Character for the BarCode String
            var BarCodeArray = []; //Empty Array
            var actTimer;
            var actTimeMin = 0;
            var actTimeSec = 0;

            var timeArr = [];

            /*======================================
            /// SET SCREEN DATA STARTS ....
            ======================================*/
            function setCP_AIREND_Data(retVal) {
                //console.log(retVal);
                //$("#imgTop").attr('src', retVal.Process_Photo_Path);

                $("#lblFAB").text(retVal.FAB_NO);
                $("#lblTPL").text(retVal.TPL_No);
                $("#lblOperatorCode").text(retVal.Operator_Code);
                $("#lblProcessDesc").text(retVal.Process_Desc);

                $("#lblCycleTimeTmr").text(retVal.Cycle_Time);
                $("#lblActTimeTmr").text(retVal.Actual_Time);

                $("#lblProcType").text(retVal.Pro_Type_Code);
                $("#lblTotalProc").text(retVal.Total_Processes);
                $("#lblCompProc").text(retVal.Completed_Process);
                
                $("#imgBottom").attr('src', retVal.Process_Photo_Path);

                //Common Fields.
                $("#lblProcSeqNo").text(retVal.Process_Seq_No);
                $("#lblTorque").text(retVal.Torque);
                $("#lblToolId").text(retVal.Tool_ID);
                $("#lblBoltCnt").text(retVal.Bolt_Count);
                $("#lblTalkTime").text(retVal.Takt_Time);

                ActTimerRestart(retVal.Actual_Time, retVal.Cycle_Time); //Start the Timer.
            }

            function setCP_BELT_DETAILSData(retVal) {
                //console.log(retVal);
                //$("#imgTop").attr('src', retVal.Process_Photo_Path);

                $("#lblFAB").text(retVal.FAB_NO);
                $("#lblTPL").text(retVal.TPL_No);
                $("#lblOperatorCode").text(retVal.Operator_Code);
                $("#lblProcessDesc").text(retVal.Process_Desc);

                $("#lblCycleTimeTmr").text(retVal.Cycle_Time);
                $("#lblActTimeTmr").text(retVal.Actual_Time);

                $("#lblProcType").text(retVal.Pro_Type_Code);
                $("#lblTotalProc").text(retVal.Total_Processes);
                $("#lblCompProc").text(retVal.Completed_Process);
                
                $("#imgBottom").attr('src', retVal.Process_Photo_Path);

                //Common Fields.
                $("#lblProcSeqNo").text(retVal.Process_Seq_No);
                $("#lblTorque").text(retVal.Torque);
                $("#lblToolId").text(retVal.Tool_ID);
                $("#lblBoltCnt").text(retVal.Bolt_Count);
                $("#lblTalkTime").text(retVal.Takt_Time);

                ActTimerRestart(retVal.Actual_Time, retVal.Cycle_Time); //Start the Timer.
            }

            function setCP_CONTROL_PANELData(retVal) {
                //console.log(retVal);
                //$("#imgTop").attr('src', retVal.Process_Photo_Path);

                $("#lblFAB").text(retVal.FAB_NO);
                $("#lblTPL").text(retVal.TPL_No);
                $("#lblOperatorCode").text(retVal.Operator_Code);
                $("#lblProcessDesc").text(retVal.Process_Desc);

                $("#lblCycleTimeTmr").text(retVal.Cycle_Time);
                $("#lblActTimeTmr").text(retVal.Actual_Time);

                $("#lblProcType").text(retVal.Pro_Type_Code);
                $("#lblTotalProc").text(retVal.Total_Processes);
                $("#lblCompProc").text(retVal.Completed_Process);
                
                $("#imgBottom").attr('src', retVal.Process_Photo_Path);

                //Common Fields.
                $("#lblProcSeqNo").text(retVal.Process_Seq_No);
                $("#lblTorque").text(retVal.Torque);
                $("#lblToolId").text(retVal.Tool_ID);
                $("#lblBoltCnt").text(retVal.Bolt_Count);
                $("#lblTalkTime").text(retVal.Takt_Time);

                ActTimerRestart(retVal.Actual_Time, retVal.Cycle_Time); //Start the Timer.
            }

            function setSUBMIT_SCREEN_Data(retVal) {
                //console.log(retVal);
                //$("#imgTop").attr('src', retVal.Process_Photo_Path);

                $("#lblFAB").text(retVal.FAB_NO);
                $("#lblTPL").text(retVal.TPL_No);
                $("#lblOperatorCode").text(retVal.Operator_Code);
                $("#lblProcessDesc").text(retVal.Process_Desc);

                $("#lblCycleTimeTmr").text(retVal.Cycle_Time);
                $("#lblActTimeTmr").text(retVal.Actual_Time);

                $("#lblProcType").text(retVal.Pro_Type_Code);
                $("#lblTotalProc").text(retVal.Total_Processes);
                $("#lblCompProc").text(retVal.Completed_Process);
                
                $("#imgBottom").attr('src', retVal.Process_Photo_Path);

                //Common Fields.
                $("#lblProcSeqNo").text(retVal.Process_Seq_No);
                $("#lblTorque").text(retVal.Torque);
                $("#lblToolId").text(retVal.Tool_ID);
                $("#lblBoltCnt").text(retVal.Bolt_Count);
                $("#lblTalkTime").text(retVal.Takt_Time);

                ActTimerRestart(retVal.Actual_Time); //Start the Timer.
            }
            /*======================================
            /// SET SCREEN DATA ENDS
            ======================================*/
            /*======================================
            /// SCREEN VALIDATION STARTS ....
            ======================================*/
            function CP_AIREND_Submit() {
                //Let's Call the Function to check if the CP_AIREND is working fine. 
                var apiSendData = new Object();
                apiSendData.FAB_NO = $("#lblFAB").text();
                apiSendData.TPL_No = $("#lblTPL").text();
                apiSendData.Emp_Name = $("#lblEmpName").text();
                apiSendData.Emp_ID = $("#lblEmpId").text();
                apiSendData.Process_Seq_No = $("#lblProcSeqNo").text();
                apiSendData.Pro_Type_Code = $("#lblProcType").text();
                apiSendData.Actual_Time = actTimeMin.toString().padStart(2, '0') + ":" + actTimeSec.toString().padStart(2, '0');
                apiSendData.method = "process_submit";
                apiSendData.station_id = $("#lblStationId").text(); 
                apiSendData.process_data = JSON.stringify({
                    Partno: $("#txtCpAirend_PartNo").val(), 
                    Revno: $("#txtCpAirend_RevNo").val(),
                    Serialno: $("#txtCpAirend_SrNo").val(),
                });

                //console.log(apiSendData);
                //console.log(restAPI.substationapi);

                $.ajax(restAPI.substationapi, {
                    dataType: 'json', 
                    type: 'POST',
                    data: apiSendData,

                    success: function (retVal, status, xhr) {
                        //console.log("Success");
                        //console.log(retVal);

                        if(!IfUndefinedOrNull(retVal.process_seq)) { //If we have valid response with Process sequence coming in.
                            //console.log(retVal.process_seq.Pro_Type_Code);
                            //Show the Div based on the value received from Django Backend
                            if (retVal.process_seq === "seq_complete") {
                                PROCESS_TYPE = retVal.process_seq;
                            } else {
                                PROCESS_TYPE = retVal.process_seq.Pro_Type_Code;
                            }
                            hideAllScreens(); //Hide All the screens before showing next screen.
                            showScreenByProcessType(PROCESS_TYPE, retVal.process_seq);
                        } else {
                            if(!IfUndefinedOrNull(retVal.process_validation)) { //We have a validation failure
                                if(retVal.process_validation === 'Fail') {
                                    //Show the dialog box.
                                    showStaticModal("Process Fail", retVal.Message);
                                }
                            } else {
                                console.log("Issue calling API");
                            }
                        }
                    }, 
                    error: function (jqXhr, textStatus, errorMessage) {
                        console.log("Error making initial API Call!");
                    }
                });

                setOnLoadCursor(); //Set the cursor to right form after load
            }

            function CP_BELT_DETAILS_Submit() {
                //Let's Call the Function to check if the CP_BELT_DETAILS is working fine. 
                var apiSendData = new Object();
                apiSendData.FAB_NO = $("#lblFAB").text();
                apiSendData.TPL_No = $("#lblTPL").text();
                apiSendData.Emp_Name = $("#lblEmpName").text();
                apiSendData.Emp_ID = $("#lblEmpId").text();
                apiSendData.Process_Seq_No = $("#lblProcSeqNo").text();
                apiSendData.Pro_Type_Code = $("#lblProcType").text();
                apiSendData.Actual_Time = actTimeMin.toString().padStart(2, '0') + ":" + actTimeSec.toString().padStart(2, '0');
                apiSendData.method = "process_submit";
                apiSendData.station_id = $("#lblStationId").text(); 
                apiSendData.process_data = JSON.stringify({
                    Partno: $("#txtCpBeltDet_PartNo").val(), 
                    Revno: $("#txtCpBeltDet_RevNo").val(),
                    beltdetails_bone: $("#txtCpBeltDet_BatchNo1").val(),
                    beltdetails_btwo: $("#txtCpBeltDet_BatchNo2").val(), 
                    beltdetails_bthree: $("#txtCpBeltDet_BatchNo3").val(),
                    beltdetails_make: $("#ddCpBeltDet_BltMake").val(),
                });

                console.log(apiSendData);
                //console.log(restAPI.substationapi);

                $.ajax(restAPI.substationapi, {
                    dataType: 'json', 
                    type: 'POST',
                    data: apiSendData,

                    success: function (retVal, status, xhr) {
                        console.log("Success");
                        console.log(retVal);

                        if(!IfUndefinedOrNull(retVal.process_seq)) { //If we have valid response with Process sequence coming in.
                            //console.log(retVal.process_seq.Pro_Type_Code);
                            //Show the Div based on the value received from Django Backend
                            if (retVal.process_seq === "seq_complete") {
                                PROCESS_TYPE = retVal.process_seq;
                            } else {
                                PROCESS_TYPE = retVal.process_seq.Pro_Type_Code;
                            }
                            hideAllScreens(); //Hide All the screens before showing next screen.
                            showScreenByProcessType(PROCESS_TYPE, retVal.process_seq);
                        } else {
                            if(!IfUndefinedOrNull(retVal.process_validation)) { //We have a validation failure
                                if(retVal.process_validation === 'Fail') {
                                    //Show the dialog box.
                                    showStaticModal("Process Fail", retVal.Message);
                                }
                            } else {
                                console.log("Issue calling API");
                            }
                        }
                    }, 
                    error: function (jqXhr, textStatus, errorMessage) {
                        console.log("Error making initial API Call!");
                    }
                });

                setOnLoadCursor(); //Set the cursor to right form after load
            }

            function CP_CONTROL_PANEL_Submit() {
                //Let's Call the Function to check if the CP_CONTROL_PANEL is working fine. 
                var apiSendData = new Object();
                apiSendData.FAB_NO = $("#lblFAB").text();
                apiSendData.TPL_No = $("#lblTPL").text();
                apiSendData.Emp_Name = $("#lblEmpName").text();
                apiSendData.Emp_ID = $("#lblEmpId").text();
                apiSendData.Process_Seq_No = $("#lblProcSeqNo").text();
                apiSendData.Pro_Type_Code = $("#lblProcType").text();
                apiSendData.Actual_Time = actTimeMin.toString().padStart(2, '0') + ":" + actTimeSec.toString().padStart(2, '0');
                apiSendData.method = "process_submit";
                apiSendData.station_id = $("#lblStationId").text(); 
                apiSendData.process_data = JSON.stringify({
                    Partno: $("#txtCpControlPanel_PartNo").val(), 
                    Revno: $("#txtCpControlPanel_RevNo").val(),
                    Serialno: $("#txtCpControlPanel_SerialNo").val(),
                });

                console.log(apiSendData);
                //console.log(restAPI.substationapi);

                $.ajax(restAPI.substationapi, {
                    dataType: 'json', 
                    type: 'POST',
                    data: apiSendData,

                    success: function (retVal, status, xhr) {
                        console.log("Success");
                        console.log(retVal);

                        if(!IfUndefinedOrNull(retVal.process_seq)) { //If we have valid response with Process sequence coming in.
                            //console.log(retVal.process_seq.Pro_Type_Code);
                            //Show the Div based on the value received from Django Backend
                            if (retVal.process_seq === "seq_complete") {
                                PROCESS_TYPE = retVal.process_seq;
                            } else {
                                PROCESS_TYPE = retVal.process_seq.Pro_Type_Code;
                            }
                            hideAllScreens(); //Hide All the screens before showing next screen.
                            showScreenByProcessType(PROCESS_TYPE, retVal.process_seq);
                        } else {
                            if(!IfUndefinedOrNull(retVal.process_validation)) { //We have a validation failure
                                if(retVal.process_validation === 'Fail') {
                                    //Show the dialog box.
                                    showStaticModal("Process Fail", retVal.Message);
                                }
                            } else {
                                console.log("Issue calling API");
                            }
                        }
                    }, 
                    error: function (jqXhr, textStatus, errorMessage) {
                        console.log("Error making initial API Call!");
                    }
                });

                setOnLoadCursor(); //Set the cursor to right form after load
            }

            function SUBMIT_Submit() {
                //Let's Call the Function to check if the SUBMIT is working fine. 
                var apiSendData = new Object();
                apiSendData.FAB_NO = $("#lblFAB").text();
                apiSendData.TPL_No = $("#lblTPL").text();
                apiSendData.Emp_Name = $("#lblEmpName").text();
                apiSendData.Emp_ID = $("#lblEmpId").text();
                //apiSendData.Process_Seq_No = $("#lblProcSeqNo").text();
                apiSendData.Process_Seq_No = 1.0;
                apiSendData.Pro_Type_Code = 'SUBMIT';
                apiSendData.Actual_Time = actTimeMin.toString().padStart(2, '0') + ":" + actTimeSec.toString().padStart(2, '0');
                apiSendData.method = "process_submit";
                apiSendData.station_id = $("#lblStationId").text(); 
                apiSendData.process_data = 'SUBMIT';

                $.ajax(restAPI.substationapi, {
                    dataType: 'json', 
                    type: 'POST',
                    data: apiSendData,

                    success: function (retVal, status, xhr) {
                        //console.log("Success");
                        //console.log(retVal);

                        if(!IfUndefinedOrNull(retVal.process_seq)) { //If we have valid response with Process sequence coming in.
                            //console.log(retVal.process_seq.Pro_Type_Code);
                            //Show the Div based on the value received from Django Backend
                            if (retVal.process_seq === "seq_complete") {
                                PROCESS_TYPE = retVal.process_seq;
                            } else {
                                PROCESS_TYPE = retVal.process_seq.Pro_Type_Code;
                            }
                            hideAllScreens(); //Hide All the screens before showing next screen.
                            showScreenByProcessType(PROCESS_TYPE, retVal.process_seq);
                        } else {
                            if(!IfUndefinedOrNull(retVal.process_validation)) { //We have a validation failure
                                if(retVal.process_validation === 'Fail') {
                                    //Show the dialog box.
                                    showStaticModal("Process Fail", retVal.Message);
                                }
                            } else {
                                console.log("Issue calling API");
                            }
                        }
                    }, 
                    error: function (jqXhr, textStatus, errorMessage) {
                        console.log("Error making initial API Call!");
                    }
                });

                setOnLoadCursor(); //Set the cursor to right form after load
            }


            /*======================================
            /// SCREEN VALIDATION ENDS
            ======================================*/

            //To Check Undefined OR Null.
            function IfUndefinedOrNull(varName) {
                if( typeof varName === 'undefined' || varName === null) {
                    return true; 
                } else {
                    return false;
                }
            }

            //Timer Start/Re-Start
            function ActTimerRestart(actTimeMmSs) {
                //console.log("Inside Act Timer Restart" + actTimeMmSs);
                
                //Set Start-Time. 
                timeArr = actTimeMmSs.split(":"); //Assuming Time will come in MM:SS format.
                actTimeMin = parseInt(timeArr[0]);
                actTimeSec = parseInt(timeArr[1]);
                
                //Clear the Interval we may have from earlier timer.
                clearInterval(actTimer);

                //We want to re-start the timer here. 
                actTimer = setInterval(function() {
                    if(parseInt(actTimeSec) >= 60) {
                        actTimeSec = 0;
                        actTimeMin = parseInt(actTimeMin) + 1;
                    }

                    actTimeSec = actTimeSec + 1; //Increase seconds
                    //console.log(actTimeMin.toString() + ":" + actTimeSec.toString());
                    $("#lblActTimeTmr").text(actTimeMin.toString().padStart(2, '0') + ":" + actTimeSec.toString().padStart(2, '0'));
                    

                }, 1000); //Run Every Second.
            }

            function difference (actualTime, cycleTime){

            }


            //Show Or Hide Screen
            function showScreen(screenId, show) {
                console.log("Made screen visible");
                if(show) {
                    $(screenId).show();
                } else {
                    $(screenId).hide();
                }

                setOnLoadCursor(); //Set the cursor to the right screen.
            }

            // Sets the cursor to right screen after the screen is shown or loaded.
            function setOnLoadCursor() {
                console.log("Setting up the cursor on load, Process Type: " + PROCESS_TYPE);
                switch(PROCESS_TYPE) {
                    case "CP_AIREND":
                        $("#txtCpAirend_PartNo").focus();
                        $("#txtCpAirend_PartNo").val(BarCode).trigger("change");
                        break;
                    case "CP_BELT_DETAILS":
                        $("#txtCpBeltDet_PartNo").focus();
                        $("#txtCpBeltDet_PartNo").val(BarCode).trigger("change");
                        break;
                    case "CP_CONTROL_PANEL":
                        $("#txtCpControlPanel_PartNo").focus();
                        $("#txtCpControlPanel_PartNo").val(BarCode).trigger("change");
                        break;
                    default:
                        $("#txtCpAirend_PartNo").focus();
                }
            }

            //Set Barcode Values back to textboxes
            function setBarCodeValues() {
                console.log("Setting Barcode values, Process Type: " + PROCESS_TYPE);
                switch(PROCESS_TYPE) {
                    case "CP_AIREND":
                        $("#txtCpAirend_PartNo").val(BarCodeArray[0]);
                        $("#txtCpAirend_RevNo").val(BarCodeArray[1]);
                        $("#txtCpAirend_SrNo").val(BarCodeArray[2]);
                        break;
                    case "CP_BELT_DETAILS":
                        $("#txtCpBeltDet_PartNo").val(BarCodeArray[0]);
                        $("#txtCpBeltDet_RevNo").val(BarCodeArray[1]);
                        break;
                    case "CP_CONTROL_PANEL":
                        $("#txtCpControlPanel_PartNo").val(BarCodeArray[0]);
                        $("#txtCpControlPanel_RevNo").val(BarCodeArray[1]);
                        $("#txtCpControlPanel_SerialNo").val(BarCodeArray[2]);
                        break;
                    default:
                        break;
                }
            }

            //Split the String
            function splitBarCode(strBarCode) {
                //Let's split the String into an Array.
                BarCodeArray = strBarCode.split(splitChar);
                setBarCodeValues();
            }

            function hideAllScreens() {
                //Hide All the Screens. 
                showScreen("#divCP_AIREND", false);
                showScreen("#divCP_BELT_DETAILS", false);
                showScreen("#CP_CONTROL_PANEL", false);
                showScreen("#divSUBMIT", false);
            }

            function showScreenByProcessType(processType, retVal) {
                console.log("Showing Screen by Process Type, Process Type: ", processType);
                //Show the Div based on the value received from Django Backend
                switch(processType) {
                    case "CP_AIREND": 
                        setCP_AIREND_Data(retVal);
                        showScreen("#divCP_AIREND", true);
                        break;
                    case "CP_BELT_DETAILS": 
                        setCP_BELT_DETAILSData(retVal);
                        showScreen("#divCP_BELT_DETAILS", true);
                        break;
                    case "CP_CONTROL_PANEL": 
                        setCP_CONTROL_PANELData(retVal);
                        showScreen("#CP_CONTROL_PANEL", true);
                        break;
                    case "SUBMIT": 
                        setSUBMIT_SCREEN_Data(retVal);
                        showScreen("#divSUBMIT", true);
                        break;
                    case "seq_complete":
                        //Set the Screen Data.
                        setProc_Comp_Data(retVal);
                        $('#donemodal').modal({backdrop: 'static', keyboard: false});
                        $('#donemodal').modal('show');
                        break;
                    default:
                        showScreen("#divCP_AIREND", true);
                }
            }

            function showStaticModal(modalTitle, modalMessage) {
                $("#commonmodal").modal({backdrop: 'static', keyboard: false});
                $("#comModalTitle").text(modalTitle);
                $("#comModalBody").text(modalMessage);
                $("#commonmodal").modal('show');
            }

            function closeModal(modalId) {
                $(modalId).modal('toggle');
            }

            /*======================================
            /// HTML ELEMENT EVENTS STARTS
            ======================================*/
            //Change Event of the TextBoxes
            $("#txtCpAirend_PartNo").change(function() {
                var barcodeString = $("#txtCpAirend_PartNo").val();
                //console.log(barcodeString);
                //Let's split the string. 
                if(barcodeString.indexOf("!") > -1) {
                    splitBarCode(barcodeString);
                }
            });

            //Change Event of the TextBoxes
            $("#txtCpBeltDet_PartNo").change(function() {
                var barcodeString = $("#txtCpBeltDet_PartNo").val();
                //Let's split the string. 
                if(barcodeString.indexOf("!") > -1) {
                    splitBarCode(barcodeString);
                }
            });

            //Change Event of the TextBoxes
            $("#txtCpControlPanel_PartNo").change(function() {
                var barcodeString = $("#txtCpControlPanel_PartNo").val();
                //Let's split the string. 
                if(barcodeString.indexOf("!") > -1) {
                    splitBarCode(barcodeString);
                }
            });
            /*======================================
            /// HTML ELEMENT EVENTS ENDS
            ======================================*/

            // All the settings when document gets loaded for the first time.
            $(document).ready(function() {
                hideAllScreens();
                
                //Here, we call the initial screen load REST API. 
                var apiSendData = new Object();
                apiSendData.method = "process_seq"; //Hard-Coded for the first call.
                apiSendData.Tpl_No = $("#lblTPL").text();
                apiSendData.Fab_No = $("#lblFAB").text();
                apiSendData.station_id = $("#lblStationId").text(); 
                //console.log(apiSendData);
                //console.log(restAPI.substationapi);

                $.ajax(restAPI.substationapi, {
                    dataType: 'json', 
                    type: 'POST',
                    data: apiSendData,

                    success: function (retVal, status, xhr) {
                        console.log("API Success");
                        //console.log(retVal.process_seq);

                        if(!IfUndefinedOrNull(retVal.process_seq)) { //If we have valid response with Process sequence coming in.
                            //console.log(retVal.process_seq.Pro_Type_Code);
                            //Show the Div based on the value received from Django Backend
                            if (retVal.process_seq === "seq_complete") {
                                PROCESS_TYPE = retVal.process_seq;
                            } else {
                                PROCESS_TYPE = retVal.process_seq.Pro_Type_Code;
                                console.log(PROCESS_TYPE);
                            }
                            showScreenByProcessType(PROCESS_TYPE, retVal.process_seq);
                        } else {
                            if(!IfUndefinedOrNull(retVal.process_validation)) { //We have a validation failure
                                if(retVal.process_validation === 'Fail') {
                                    //Show the dialog box.
                                    showStaticModal("Process Fail", retVal.Message);
                                }
                            } else {
                                console.log("Issue calling API");
                            }
                        }
                    }, 
                    error: function (jqXhr, textStatus, errorMessage) {
                        console.log("Error making initial API Call!");
                    }
                });

                //setOnLoadCursor(); //Set the cursor to right form after load
            });
        </script>
    </body>
</html>